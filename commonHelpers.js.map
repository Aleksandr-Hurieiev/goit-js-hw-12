{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { page } from \"../main\";\nexport default async function makeRequest(userInput) {\n  axios.defaults.baseURL = 'https://pixabay.com/api/?';\n  const searchParams = new URLSearchParams({\n    key: '44460301-2102a6dd6fc86b62b9707eae5',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 12,\n    limit: 40,\n  });\n\n  // -------------------------------\n  try {\n    const response = await axios.get(`&q=${userInput}&${searchParams}&${page}`);\n    return response;\n  } catch (error) {}\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const list = document.querySelector('#list-js');\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nexport default function renderUser(users) {\n  const markup = users.data.hits\n    .map(user => {\n      return `<li class=\"list__item\">\n                <div class=\"gallery\">\n          <a href=\"${user.webformatURL}\"><img class=\"list__img\" src=\"${user.webformatURL}\" alt=\"${user.user}\"</a>\n      </div>\n    <ul class=\"item__list\">\n      <li class=\"item__list-item\">\n        <h3 class=\"item__list-title\">Likes</h3>\n        <p class=\"item__list-text\">${user.likes}</p>\n      </li>\n      <li class=\"item__list-item\">\n        <h3 class=\"item__list-title\">Views</h3>\n        <p class=\"item__list-text\">${user.views}</p>\n      </li>\n      <li class=\"item__list-item\">\n        <h3 class=\"item__list-title\">Comments</h3>\n        <p class=\"item__list-text\">${user.comments}</p>\n      </li>\n      <li class=\"item__list-item\">\n        <h3 class=\"item__list-title\">Downloads</h3>\n        <p class=\"item__list-text\">${user.downloads}</p>\n      </li>\n    </ul>\n  </li>`;\n    })\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport makeRequest from './js/pixabay-api.js';\nimport renderUser, { list } from './js/render-function.js';\n\n//=========================================================================\nlet userInput;\nexport let page = 1;\nlet limit = 48;\nconst totalPages = Math.ceil(100 / limit);\n//=========================================================================\n\nconst form = document.querySelector('.form_js');\nconst loader = document.querySelector('#loader');\nconst formButton = document.querySelector('.form__button');\nconst formInput = document.querySelector('.form__input');\nconst showMore = document.querySelector('.button-js');\n//=========================================================================================================================================\n\nform.addEventListener('submit', createData);\nshowMore.addEventListener('click', showMoreItem);\n//=========================================================================\nasync function showMoreItem(event) {\n  if (page >= totalPages) {\n    showMore.classList.add('button-active');\n    showMore.disabled = true;\n    return iziToast.info({\n      title: 'Sorry',\n      message: 'no more photos!',\n    });\n  }\n  const moreItem = await makeRequest(userInput);\n  renderUser(moreItem);\n  page += 1;\n  console.log(page);\n}\n\n//=========================================================================================================================================\n\nfunction createData(event) {\n  event.preventDefault();\n  showMore.classList.add('isActive');\n  list.innerHTML = '';\n  const search = event.target[0].value.trim();\n  userInput = event.target[0].value.trim();\n  if (!search) {\n    event.target[0].value = '';\n    return iziToast.warning({\n      title: 'Warning',\n      message: 'Enter more than one character',\n      position: 'topRight',\n    });\n  }\n\n  userInput = search;\n  toggleLoading(true);\n\n  setTimeout(() => {\n    makeRequest(userInput)\n      .then(users => {\n        if (!users.data.hits.length) {\n          showMore.classList.add('isActive');\n          iziToast.error({\n            position: 'topRight',\n            title: 'Error',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        } else {\n          renderUser(users);\n          showMore.classList.remove('isActive');\n        }\n      })\n      .catch(error => {\n        console.log(error);\n        iziToast.error({\n          title: `${error}`,\n          message: 'Page not found',\n          position: 'topRight',\n        });\n      })\n      .finally(() => {\n        toggleLoading(false);\n      });\n  }, 1000);\n  form.reset();\n}\n\nfunction toggleLoading(isLoading) {\n  loader.classList.toggle('loader', isLoading);\n  formButton.classList.toggle('form__button-active', isLoading);\n  formInput.disabled = isLoading;\n  formButton.disabled = isLoading;\n}\n"],"names":["makeRequest","userInput","axios","searchParams","page","list","gallery","SimpleLightbox","renderUser","users","markup","user","limit","totalPages","form","loader","formButton","formInput","showMore","createData","showMoreItem","event","iziToast","moreItem","search","toggleLoading","error","isLoading"],"mappings":"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"}