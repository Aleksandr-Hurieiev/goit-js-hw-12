{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["// pixabay.js\nimport axios from 'axios';\n\nexport default async function makeRequest(data, page) {\n  const { key, q, image_type, orientation, safesearch, per_page } = data;\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?&page=${page}`, {\n      params: {\n        key,\n        q,\n        image_type,\n        orientation,\n        safesearch,\n        per_page,\n      },\n    });\n    if (response.status !== 200) {\n      throw new Error(`Request failed with status ${response.status}`);\n    }\n\n    return response.data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const list = document.querySelector('#list-js');\nlet gallery = new SimpleLightbox('.list__item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nexport default function renderUser(users) {\n  const markup = users.hits\n    .map(user => {\n      return `<div class=\"gallery\">\n      <li class=\"list__item\">        \n          <a href=\"${user.webformatURL}\"><img class=\"list__img\" src=\"${user.webformatURL}\" alt=\"${user.user}\"</a>      \n    <ul class=\"item__list\">\n      <li class=\"item__list-item\">\n        <h3 class=\"item__list-title\">Likes</h3>\n        <p class=\"item__list-text\">${user.likes}</p>\n      </li>\n      <li class=\"item__list-item\">\n        <h3 class=\"item__list-title\">Views</h3>\n        <p class=\"item__list-text\">${user.views}</p>\n      </li>\n      <li class=\"item__list-item\">\n        <h3 class=\"item__list-title\">Comments</h3>\n        <p class=\"item__list-text\">${user.comments}</p>\n      </li>\n      <li class=\"item__list-item\">\n        <h3 class=\"item__list-title\">Downloads</h3>\n        <p class=\"item__list-text\">${user.downloads}</p>\n      </li>\n    </ul>\n  </li>\n  </div>`;\n    })\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n","// main.js\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport makeRequest from './js/pixabay-api.js'; // Adjust the path based on your project structure\nimport renderUser, { list } from './js/render-function.js'; // Adjust the path based on your project structure\n\nconst param = {\n  key: '44329356-b9318945d135833e2eb07a97b',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 12,\n};\nexport let page = 1;\n// Контролює кількість елементів в групі\n// Кількість груп в колекції\nconst totalPages = Math.ceil(50 / param.per_page);\nconst form = document.querySelector('.form_js');\nconst loader = document.querySelector('#loader');\nconst formButton = document.querySelector('.form__button');\nconst formInput = document.querySelector('.form__input');\nconst loadMore = document.querySelector('.button-js');\n\nform.addEventListener('submit', createData);\n\nasync function createData(event) {\n  event.preventDefault();\n  page = 1;\n  list.innerHTML = '';\n  const search = event.target[0].value.trim();\n  param.q = search;\n  if (!search) {\n    event.target[0].value = '';\n    return iziToast.warning({\n      title: 'Warning',\n      message: 'Enter more than one character',\n      position: 'topRight',\n    });\n  }\n  try {\n    const users = await makeRequest(param, page);\n    if (!users.hits.length) {\n      iziToast.error({\n        position: 'topRight',\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      toggleLoading(true);\n      setTimeout(() => {\n        renderUser(users);\n        loadMore.classList.remove('isActive');\n        toggleLoading(false);\n      }, 500);\n    }\n  } catch (error) {\n    iziToast.error({\n      title: `${error}`,\n      message: 'Page not found',\n      position: 'topRight',\n    });\n  } finally {\n    form.reset();\n  }\n}\n//=========================================================================================================================================\nloadMore.addEventListener('click', async () => {\n  page += 1;\n  console.log(totalPages);\n\n  try {\n    const moreUser = await makeRequest(param, page);\n    toggleLoading(true);\n\n    setTimeout(() => {\n      renderUser(moreUser);\n      toggleLoading(false);\n      smoothScroll()\n    }, 500);\n\n    if (page < totalPages) {\n      return;\n    }\n    loadMore.classList.add('isActive');\n    iziToast.error({\n      title: 'Sorry',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } catch (error) {}\n});\n//=========================================================================================================================================\nfunction smoothScroll() {\n  const { height: cardHeight } = list.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n//=========================================================================================================================================\nfunction toggleLoading(isLoading) {\n  loader.classList.toggle('loader', isLoading);\n  formButton.classList.toggle('form__button-active', isLoading);\n  formInput.disabled = isLoading;\n  formButton.disabled = isLoading;\n}\n//=========================================================================================================================================\n"],"names":["makeRequest","data","page","key","q","image_type","orientation","safesearch","per_page","response","axios","error","list","gallery","SimpleLightbox","renderUser","users","markup","user","param","totalPages","form","loader","formButton","formInput","loadMore","createData","event","search","iziToast","toggleLoading","moreUser","smoothScroll","cardHeight","isLoading"],"mappings":"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"}